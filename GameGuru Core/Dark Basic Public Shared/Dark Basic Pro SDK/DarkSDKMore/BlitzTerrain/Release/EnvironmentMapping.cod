; Listing generated by Microsoft (R) Optimizing Compiler Version 19.38.33139.0 

	TITLE	D:\DEV\GameGuruConverter - reduced\GameGuru Core\Dark Basic Public Shared\Dark Basic Pro SDK\DarkSDKMore\BlitzTerrain\Release\EnvironmentMapping.obj
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?BT_Intern_AddEnvironment@@YAGPAUBT_EnvironmentMap@@K@Z ; BT_Intern_AddEnvironment
PUBLIC	?BT_Intern_CreateEnvironmentMap@@YAXPAUBT_EnvironmentMap@@KKPAK@Z ; BT_Intern_CreateEnvironmentMap
PUBLIC	?BT_Intern_DeleteEnvironmentMap@@YAXPAUBT_EnvironmentMap@@@Z ; BT_Intern_DeleteEnvironmentMap
PUBLIC	?BT_Intern_GetPointEnvironment@@YAGPAUBT_EnvironmentMap@@KK@Z ; BT_Intern_GetPointEnvironment
PUBLIC	?BT_Intern_SetEnvironmentDetailmap@@YAXPAUBT_EnvironmentMap@@GK@Z ; BT_Intern_SetEnvironmentDetailmap
PUBLIC	?BT_Intern_GetEnvironmentDetailmap@@YAKPAUBT_EnvironmentMap@@G@Z ; BT_Intern_GetEnvironmentDetailmap
PUBLIC	___use_char_max
PUBLIC	?BT_Intern_CleanupEnvironmentMap@@YAXPAUBT_EnvironmentMap@@@Z ; BT_Intern_CleanupEnvironmentMap
EXTRN	_free:PROC
EXTRN	_malloc:PROC
EXTRN	_realloc:PROC
EXTRN	?BT_Intern_Error@@YAXH@Z:PROC			; BT_Intern_Error
EXTRN	_memset:PROC
EXTRN	___do_unsigned_char_lconv_initialization:DWORD
; Function compile flags: /Ogtp
;	COMDAT ?BT_Intern_CleanupEnvironmentMap@@YAXPAUBT_EnvironmentMap@@@Z
_TEXT	SEGMENT
_EnvironmentMap$ = 8					; size = 4
?BT_Intern_CleanupEnvironmentMap@@YAXPAUBT_EnvironmentMap@@@Z PROC ; BT_Intern_CleanupEnvironmentMap, COMDAT
; File D:\DEV\GameGuruConverter - reduced\GameGuru Core\Dark Basic Public Shared\Dark Basic Pro SDK\DarkSDKMore\BlitzTerrain\EnvironmentMapping.cpp
; Line 64
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
; Line 65
  00004	8b 75 08	 mov	 esi, DWORD PTR _EnvironmentMap$[ebp]
  00007	ff 76 14	 push	 DWORD PTR [esi+20]
  0000a	e8 00 00 00 00	 call	 _free
  0000f	83 c4 04	 add	 esp, 4
; Line 66
  00012	c7 46 14 00 00
	00 00		 mov	 DWORD PTR [esi+20], 0
  00019	5e		 pop	 esi
; Line 67
  0001a	5d		 pop	 ebp
  0001b	c3		 ret	 0
?BT_Intern_CleanupEnvironmentMap@@YAXPAUBT_EnvironmentMap@@@Z ENDP ; BT_Intern_CleanupEnvironmentMap
_TEXT	ENDS
; Function compile flags: /Ogtp
;	COMDAT ___use_char_max
_TEXT	SEGMENT
___use_char_max PROC					; COMDAT
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.10150.0\ucrt\locale.h
; Line 66
  00000	a1 00 00 00 00	 mov	 eax, DWORD PTR ___do_unsigned_char_lconv_initialization
; Line 67
  00005	c3		 ret	 0
___use_char_max ENDP
_TEXT	ENDS
; Function compile flags: /Ogtp
;	COMDAT ?BT_Intern_GetEnvironmentDetailmap@@YAKPAUBT_EnvironmentMap@@G@Z
_TEXT	SEGMENT
_EnvironmentMap$ = 8					; size = 4
_EnvironmentMapID$ = 12					; size = 2
?BT_Intern_GetEnvironmentDetailmap@@YAKPAUBT_EnvironmentMap@@G@Z PROC ; BT_Intern_GetEnvironmentDetailmap, COMDAT
; File D:\DEV\GameGuruConverter - reduced\GameGuru Core\Dark Basic Public Shared\Dark Basic Pro SDK\DarkSDKMore\BlitzTerrain\EnvironmentMapping.cpp
; Line 94
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
; Line 95
  00003	8b 4d 08	 mov	 ecx, DWORD PTR _EnvironmentMap$[ebp]
  00006	0f b7 55 0c	 movzx	 edx, WORD PTR _EnvironmentMapID$[ebp]
  0000a	8b 41 18	 mov	 eax, DWORD PTR [ecx+24]
  0000d	8b 04 90	 mov	 eax, DWORD PTR [eax+edx*4]
; Line 96
  00010	5d		 pop	 ebp
  00011	c3		 ret	 0
?BT_Intern_GetEnvironmentDetailmap@@YAKPAUBT_EnvironmentMap@@G@Z ENDP ; BT_Intern_GetEnvironmentDetailmap
_TEXT	ENDS
; Function compile flags: /Ogtp
;	COMDAT ?BT_Intern_SetEnvironmentDetailmap@@YAXPAUBT_EnvironmentMap@@GK@Z
_TEXT	SEGMENT
_EnvironmentMap$ = 8					; size = 4
_EnvironmentMapID$ = 12					; size = 2
_DetailMapID$ = 16					; size = 4
?BT_Intern_SetEnvironmentDetailmap@@YAXPAUBT_EnvironmentMap@@GK@Z PROC ; BT_Intern_SetEnvironmentDetailmap, COMDAT
; File D:\DEV\GameGuruConverter - reduced\GameGuru Core\Dark Basic Public Shared\Dark Basic Pro SDK\DarkSDKMore\BlitzTerrain\EnvironmentMapping.cpp
; Line 89
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
; Line 90
  00003	8b 45 08	 mov	 eax, DWORD PTR _EnvironmentMap$[ebp]
  00006	0f b7 55 0c	 movzx	 edx, WORD PTR _EnvironmentMapID$[ebp]
  0000a	8b 48 18	 mov	 ecx, DWORD PTR [eax+24]
  0000d	8b 45 10	 mov	 eax, DWORD PTR _DetailMapID$[ebp]
  00010	89 04 91	 mov	 DWORD PTR [ecx+edx*4], eax
; Line 91
  00013	5d		 pop	 ebp
  00014	c3		 ret	 0
?BT_Intern_SetEnvironmentDetailmap@@YAXPAUBT_EnvironmentMap@@GK@Z ENDP ; BT_Intern_SetEnvironmentDetailmap
_TEXT	ENDS
; Function compile flags: /Ogtp
;	COMDAT ?BT_Intern_GetPointEnvironment@@YAGPAUBT_EnvironmentMap@@KK@Z
_TEXT	SEGMENT
_EnvironmentMap$ = 8					; size = 4
_x$ = 12						; size = 4
_y$ = 16						; size = 4
?BT_Intern_GetPointEnvironment@@YAGPAUBT_EnvironmentMap@@KK@Z PROC ; BT_Intern_GetPointEnvironment, COMDAT
; File D:\DEV\GameGuruConverter - reduced\GameGuru Core\Dark Basic Public Shared\Dark Basic Pro SDK\DarkSDKMore\BlitzTerrain\EnvironmentMapping.cpp
; Line 84
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
; Line 85
  00003	8b 45 08	 mov	 eax, DWORD PTR _EnvironmentMap$[ebp]
  00006	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  00009	0f af 4d 10	 imul	 ecx, DWORD PTR _y$[ebp]
  0000d	8b 40 0c	 mov	 eax, DWORD PTR [eax+12]
  00010	03 4d 0c	 add	 ecx, DWORD PTR _x$[ebp]
  00013	66 8b 04 48	 mov	 ax, WORD PTR [eax+ecx*2]
; Line 86
  00017	5d		 pop	 ebp
  00018	c3		 ret	 0
?BT_Intern_GetPointEnvironment@@YAGPAUBT_EnvironmentMap@@KK@Z ENDP ; BT_Intern_GetPointEnvironment
_TEXT	ENDS
; Function compile flags: /Ogtp
;	COMDAT ?BT_Intern_DeleteEnvironmentMap@@YAXPAUBT_EnvironmentMap@@@Z
_TEXT	SEGMENT
_EnvironmentMap$ = 8					; size = 4
?BT_Intern_DeleteEnvironmentMap@@YAXPAUBT_EnvironmentMap@@@Z PROC ; BT_Intern_DeleteEnvironmentMap, COMDAT
; File D:\DEV\GameGuruConverter - reduced\GameGuru Core\Dark Basic Public Shared\Dark Basic Pro SDK\DarkSDKMore\BlitzTerrain\EnvironmentMapping.cpp
; Line 70
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
; Line 72
  00004	8b 75 08	 mov	 esi, DWORD PTR _EnvironmentMap$[ebp]
  00007	8b 46 14	 mov	 eax, DWORD PTR [esi+20]
  0000a	85 c0		 test	 eax, eax
  0000c	74 09		 je	 SHORT $LN2@BT_Intern_
; Line 73
  0000e	50		 push	 eax
  0000f	e8 00 00 00 00	 call	 _free
  00014	83 c4 04	 add	 esp, 4
$LN2@BT_Intern_:
; Line 76
  00017	8b 46 0c	 mov	 eax, DWORD PTR [esi+12]
  0001a	85 c0		 test	 eax, eax
  0001c	74 09		 je	 SHORT $LN3@BT_Intern_
; Line 77
  0001e	50		 push	 eax
  0001f	e8 00 00 00 00	 call	 _free
  00024	83 c4 04	 add	 esp, 4
$LN3@BT_Intern_:
; Line 80
  00027	0f 57 c0	 xorps	 xmm0, xmm0
  0002a	0f 11 06	 movups	 XMMWORD PTR [esi], xmm0
  0002d	66 0f d6 46 10	 movq	 QWORD PTR [esi+16], xmm0
  00032	c7 46 18 00 00
	00 00		 mov	 DWORD PTR [esi+24], 0
  00039	5e		 pop	 esi
; Line 81
  0003a	5d		 pop	 ebp
  0003b	c3		 ret	 0
?BT_Intern_DeleteEnvironmentMap@@YAXPAUBT_EnvironmentMap@@@Z ENDP ; BT_Intern_DeleteEnvironmentMap
_TEXT	ENDS
; Function compile flags: /Ogtp
;	COMDAT ?BT_Intern_CreateEnvironmentMap@@YAXPAUBT_EnvironmentMap@@KKPAK@Z
_TEXT	SEGMENT
_x$1$ = -4						; size = 4
tv398 = 8						; size = 4
_EnvironmentMap$ = 8					; size = 4
_Width$ = 12						; size = 4
_Height$ = 16						; size = 4
_Buffer$ = 20						; size = 4
?BT_Intern_CreateEnvironmentMap@@YAXPAUBT_EnvironmentMap@@KKPAK@Z PROC ; BT_Intern_CreateEnvironmentMap, COMDAT
; File D:\DEV\GameGuruConverter - reduced\GameGuru Core\Dark Basic Public Shared\Dark Basic Pro SDK\DarkSDKMore\BlitzTerrain\EnvironmentMapping.cpp
; Line 31
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	53		 push	 ebx
; Line 33
  00005	8b 5d 0c	 mov	 ebx, DWORD PTR _Width$[ebp]
  00008	56		 push	 esi
  00009	57		 push	 edi
  0000a	8b fb		 mov	 edi, ebx
  0000c	0f af 7d 10	 imul	 edi, DWORD PTR _Height$[ebp]
  00010	03 ff		 add	 edi, edi
  00012	57		 push	 edi
  00013	e8 00 00 00 00	 call	 _malloc
  00018	8b 75 08	 mov	 esi, DWORD PTR _EnvironmentMap$[ebp]
  0001b	83 c4 04	 add	 esp, 4
  0001e	89 46 0c	 mov	 DWORD PTR [esi+12], eax
; Line 34
  00021	85 c0		 test	 eax, eax
  00023	75 0a		 jne	 SHORT $LN11@BT_Intern_
; Line 35
  00025	6a 1b		 push	 27			; 0000001bH
  00027	e8 00 00 00 00	 call	 ?BT_Intern_Error@@YAXH@Z ; BT_Intern_Error
  0002c	83 c4 04	 add	 esp, 4
$LN11@BT_Intern_:
; Line 36
  0002f	57		 push	 edi
  00030	6a 00		 push	 0
  00032	ff 76 0c	 push	 DWORD PTR [esi+12]
  00035	e8 00 00 00 00	 call	 _memset
; Line 40
  0003a	8b 55 10	 mov	 edx, DWORD PTR _Height$[ebp]
  0003d	33 c0		 xor	 eax, eax
  0003f	83 c4 0c	 add	 esp, 12			; 0000000cH
  00042	89 5e 04	 mov	 DWORD PTR [esi+4], ebx
  00045	89 56 08	 mov	 DWORD PTR [esi+8], edx
  00048	89 45 fc	 mov	 DWORD PTR _x$1$[ebp], eax
; Line 43
  0004b	85 db		 test	 ebx, ebx
  0004d	74 73		 je	 SHORT $LN3@BT_Intern_
  0004f	8b 4d 14	 mov	 ecx, DWORD PTR _Buffer$[ebp]
$LL4@BT_Intern_:
; Line 45
  00052	85 d2		 test	 edx, edx
  00054	74 5e		 je	 SHORT $LN2@BT_Intern_
  00056	8b 5d 14	 mov	 ebx, DWORD PTR _Buffer$[ebp]
  00059	8d 3c 00	 lea	 edi, DWORD PTR [eax+eax]
  0005c	89 55 08	 mov	 DWORD PTR tv398[ebp], edx
  0005f	90		 npad	 1
$LL7@BT_Intern_:
; Line 47
  00060	0f b7 4e 10	 movzx	 ecx, WORD PTR [esi+16]
  00064	b8 01 00 00 00	 mov	 eax, 1
  00069	41		 inc	 ecx
  0006a	3b c8		 cmp	 ecx, eax
  0006c	76 23		 jbe	 SHORT $LN5@BT_Intern_
  0006e	8b d0		 mov	 edx, eax
$LL10@BT_Intern_:
; Line 49
  00070	8b 4e 14	 mov	 ecx, DWORD PTR [esi+20]
  00073	8b 0c 91	 mov	 ecx, DWORD PTR [ecx+edx*4]
  00076	3b 0b		 cmp	 ecx, DWORD PTR [ebx]
  00078	75 07		 jne	 SHORT $LN8@BT_Intern_
; Line 50
  0007a	8b 4e 0c	 mov	 ecx, DWORD PTR [esi+12]
  0007d	66 89 04 0f	 mov	 WORD PTR [edi+ecx], ax
$LN8@BT_Intern_:
; Line 47
  00081	0f b7 4e 10	 movzx	 ecx, WORD PTR [esi+16]
  00085	40		 inc	 eax
  00086	0f b7 d0	 movzx	 edx, ax
  00089	41		 inc	 ecx
  0008a	3b d1		 cmp	 edx, ecx
  0008c	72 e2		 jb	 SHORT $LL10@BT_Intern_
  0008e	8b 55 08	 mov	 edx, DWORD PTR tv398[ebp]
$LN5@BT_Intern_:
; Line 45
  00091	8b 4d 0c	 mov	 ecx, DWORD PTR _Width$[ebp]
  00094	8d 04 8d 00 00
	00 00		 lea	 eax, DWORD PTR [ecx*4]
  0009b	03 d8		 add	 ebx, eax
  0009d	8d 3c 4f	 lea	 edi, DWORD PTR [edi+ecx*2]
  000a0	83 ea 01	 sub	 edx, 1
  000a3	89 55 08	 mov	 DWORD PTR tv398[ebp], edx
  000a6	75 b8		 jne	 SHORT $LL7@BT_Intern_
  000a8	8b 45 fc	 mov	 eax, DWORD PTR _x$1$[ebp]
  000ab	8b 4d 14	 mov	 ecx, DWORD PTR _Buffer$[ebp]
  000ae	8b 5d 0c	 mov	 ebx, DWORD PTR _Width$[ebp]
  000b1	8b 55 10	 mov	 edx, DWORD PTR _Height$[ebp]
$LN2@BT_Intern_:
; Line 43
  000b4	40		 inc	 eax
  000b5	83 c1 04	 add	 ecx, 4
  000b8	89 45 fc	 mov	 DWORD PTR _x$1$[ebp], eax
  000bb	89 4d 14	 mov	 DWORD PTR _Buffer$[ebp], ecx
  000be	3b c3		 cmp	 eax, ebx
  000c0	72 90		 jb	 SHORT $LL4@BT_Intern_
$LN3@BT_Intern_:
; Line 56
  000c2	ff 76 14	 push	 DWORD PTR [esi+20]
  000c5	e8 00 00 00 00	 call	 _free
  000ca	83 c4 04	 add	 esp, 4
; Line 57
  000cd	c7 46 14 00 00
	00 00		 mov	 DWORD PTR [esi+20], 0
; Line 60
  000d4	c6 06 01	 mov	 BYTE PTR [esi], 1
  000d7	5f		 pop	 edi
  000d8	5e		 pop	 esi
  000d9	5b		 pop	 ebx
; Line 61
  000da	8b e5		 mov	 esp, ebp
  000dc	5d		 pop	 ebp
  000dd	c3		 ret	 0
?BT_Intern_CreateEnvironmentMap@@YAXPAUBT_EnvironmentMap@@KKPAK@Z ENDP ; BT_Intern_CreateEnvironmentMap
_TEXT	ENDS
; Function compile flags: /Ogtp
;	COMDAT ?BT_Intern_AddEnvironment@@YAGPAUBT_EnvironmentMap@@K@Z
_TEXT	SEGMENT
_EnvironmentMap$ = 8					; size = 4
_Colour$ = 12						; size = 4
?BT_Intern_AddEnvironment@@YAGPAUBT_EnvironmentMap@@K@Z PROC ; BT_Intern_AddEnvironment, COMDAT
; File D:\DEV\GameGuruConverter - reduced\GameGuru Core\Dark Basic Public Shared\Dark Basic Pro SDK\DarkSDKMore\BlitzTerrain\EnvironmentMapping.cpp
; Line 7
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
; Line 9
  00004	8b 75 08	 mov	 esi, DWORD PTR _EnvironmentMap$[ebp]
  00007	80 3e 00	 cmp	 BYTE PTR [esi], 0
  0000a	75 45		 jne	 SHORT $LN2@BT_Intern_
; Line 12
  0000c	66 8b 46 10	 mov	 ax, WORD PTR [esi+16]
  00010	66 40		 inc	 ax
  00012	66 89 46 10	 mov	 WORD PTR [esi+16], ax
; Line 13
  00016	0f b7 c0	 movzx	 eax, ax
  00019	8d 04 85 04 00
	00 00		 lea	 eax, DWORD PTR [eax*4+4]
  00020	50		 push	 eax
  00021	ff 76 14	 push	 DWORD PTR [esi+20]
  00024	e8 00 00 00 00	 call	 _realloc
  00029	83 c4 08	 add	 esp, 8
  0002c	89 46 14	 mov	 DWORD PTR [esi+20], eax
; Line 14
  0002f	85 c0		 test	 eax, eax
  00031	75 0a		 jne	 SHORT $LN3@BT_Intern_
; Line 15
  00033	6a 1b		 push	 27			; 0000001bH
  00035	e8 00 00 00 00	 call	 ?BT_Intern_Error@@YAXH@Z ; BT_Intern_Error
  0003a	83 c4 04	 add	 esp, 4
$LN3@BT_Intern_:
; Line 19
  0003d	0f b7 56 10	 movzx	 edx, WORD PTR [esi+16]
  00041	8b 4e 14	 mov	 ecx, DWORD PTR [esi+20]
  00044	8b 45 0c	 mov	 eax, DWORD PTR _Colour$[ebp]
  00047	89 04 91	 mov	 DWORD PTR [ecx+edx*4], eax
; Line 23
  0004a	66 8b 46 10	 mov	 ax, WORD PTR [esi+16]
  0004e	5e		 pop	 esi
; Line 28
  0004f	5d		 pop	 ebp
  00050	c3		 ret	 0
$LN2@BT_Intern_:
; Line 27
  00051	33 c0		 xor	 eax, eax
  00053	5e		 pop	 esi
; Line 28
  00054	5d		 pop	 ebp
  00055	c3		 ret	 0
?BT_Intern_AddEnvironment@@YAGPAUBT_EnvironmentMap@@K@Z ENDP ; BT_Intern_AddEnvironment
_TEXT	ENDS
END
